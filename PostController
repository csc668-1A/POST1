package csc668assignment1;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class PostController {

    private Post_J_Frame theView;
    private PostModel theModel;

    public PostController(Post_J_Frame theView, PostModel theModel) {
        this.theView = theView;
        this.theModel = theModel;

        // Tell the View that when ever the button
        // is clicked to execute the actionPerformed method
        // in the inner class
        this.theView.addCustomerNameListener(new PostListener());
    }

    class PostListener implements ActionListener {

        //Action called when button clicked
        public void firstActionPerformed(ActionEvent e) {

            String customerName = "Null";
            int quantity;
            int upcCode;
            int upcTimesQuantity;

            try {
                
                //Sets customer name, quantity, upc code, and returns a total balance of upc * quantity

                customerName = theView.getCustomerName();
                quantity = theView.getQuantity();
                upcCode = theView.getUPCCode();
                upcTimesQuantity = upcCode * quantity;

                theModel.getTotal(upcTimesQuantity);
                theView.setTotalValue(theModel.getTotalValue());
            } catch (NumberFormatException ex) {

                System.out.println(ex);

                theView.displayErrorMessage("error");
            }
        }

        public void secondActionPerformed(ActionEvent f) {

            int paymentAmount;

            try {

                paymentAmount = theView.getPaymentAmount();

                theView.displayPaymentAccepted("Payment Accepted");
            } catch (NumberFormatException ex) {

                System.out.println(ex);

                theView.displayErrorMessage("error");
            }

        }

    }

}
